INTSourceChangelist:2276180
Availability:Public
Title:合成テクスチャ
Crumbs:
Description:

**合成テクスチャ** 機能によって、_テクスチャ_ を別のコンテンツと結合することができます。

この機能は現在、他の法線マップの詳細を使用した _テクスチャ_ のラフネスの調整に使用されます。
これはリアルタイム 3D レンダリングに共通するアーティファクトの修正に便利です：遠方の法線マップのエイリアシング
または揺らめきなどです。またカメラ近接時に法線マップが詳細化する _マテリアル_ に対してスペキュラサイズを維持しますが、
遠ざかると平面な表示となりがちな法線マップのミップマップを使用します。

## ラフネス（粗さ）の修正に設定する合成テクスチャは、法線マップの詳細によって決定します。

ユーザーのディフューズ _テクスチャ_ の **合成テクスチャ** プロパティに法線マップ (同サイズまたはより高い解像度) を割り当てて、 
**合成テクスチャ** 機能を使用する _テクスチャ_ を設定します。ラフネスは多くの場合はディフューズ アルファチャンネルに格納しますが、
デフォルト設定を変更して任意のチャンネルへ変更することができます。 

このプロセスはラフネス値が既に _テクスチャ_ に格納されていて、法線マップのバリエーションによって 
チャンネルをより粗い (明るい) 値へ修正するプロセスを仮定しています

![](properties.png)

[REGION:tip]
_テクスチャ_ のアルファチャンネルに情報が格納されていない場合、 
アルファチャンネルが無いことは白を意味するため特定のチャンネルを変更するプロセスは機能しません。そのかわりに、最初に **Max Alpha** プロパティを修正して 
ソースのアルファ値を定数値に設定します。ユーザーがテクスチャのアルファチャンネルをマテリアルのラフネスへ直接接続しアルファチャンネルが白 (デフォルトの1) の場合、
**Max Alpha** として
ラフネス値を直接指定することができます。テクスチャ コンテンツが修正されます。加えてラフネスも修正されます。
[/REGION]

[REGION:imagetable]
| ![](map_normal.png) | ![](map_roughness.png) |
| ------ | ------ |
| 法線マップ | 合成ラフネスマップ |
[/REGION]

[REGION:note]
修正を確認するために、**Texture Editor** にアルファチャンネルのみを表示させる設定ができます。
[/REGION]

### プロパティの合成

**合成テクスチャ** による_テクスチャ_のチャンネルの修正方法に影響を与える追加のプロパティもいくつかあります。

| プロパティ | 説明 |
| -------- | ----------- |
| Composite Texture Mode | **合成テクスチャ** が修正に使用した _テクスチャ_ の (_R_、 _G_、 _B_、 または _A_) のチャンネルを特定します。 |
| Composite Power | ターゲットチャンネルに対する **合成テクスチャ** の影響度を決定します。 [1:default, <1 less influence, >1 more influence] |

## 合成ラフネスマップの使用

_マテリアル_ は _テクスチャ_ のアルファチャンネルをサンプリングしてラフネスマップを利用します。 

![](mat_roughness.png)

[REGION:tip]
シェーダーに複数のラフネスを追加してこれらを結合すると、自然な結合結果となります。
[/REGION]

## 結果

[REGION:imagetable]
| ![](comp_off_aa_off.png) | ![](comp_on_aa_off.png) |
| ------ | ------ |
| 法線マップのみ | 法線マップと合成ラフネスマップ |
[/REGION]

[REGION:imagetable]
| ![](comp_off_aa_on.png) | ![](comp_on_aa_on.png) |
| ------ | ------ |
| PostProcessAA と法線マップの使用 | PostProcessAA と合成ラフネスマップの使用 |
[/REGION]

## 問題

この機能は、ユーザーの法線マップとラフネスマップの UV レイアウトが同一の場合のみ動作します。
これは正しい結果の概算であることに注意しましょう。結果は等方性です。つまり法線マップのいかなる方向性も
考慮していません。十分な大きさの UV 境界があることを確認してください。誤ったコンテンツが紛れ込む恐れがあります。


