INTSourceChangelist:2476885
Availability:Public
Title:マルチプレイヤーのテスト方法
Crumbs: %ROOT%, Gameplay
Description:マルチプレイヤー ゲームをテストするためにアンリアル エディタをセットアップする方法の説明。 
Related:Resources/ContentExamples/Networking

[TOC (start:2 end:2)]

## 概要

このページでは、様々なマルチプレイヤー シナリオをテストするためのエディタ設定の変更方法について説明します。 

## プレイヤー数の設定

**[Play]** ボタンの横にある下向きの矢印をクリックすると、ゲーム起動時にスポーンするプレイヤー数を増やすことができます。 

![](NumberOfPlayers.png)

ここから **Number of Players** 欄にゲーム起動時にスポーンするプレイヤー数を設定できます。 

![](PIE.png)

デフォルトでサーバーは **Selected Viewport** をプレイ ウィンドウとして使用し、新しいウィンドウは追加される各プレイヤーに対して作成されます。 

## プレイ ウィンドウを調整する

エディタのビューポートをプレイ ウィンドウとして使用することは何ら問題はありませんが、わかりやすくするためにプレイヤーごとに別のウィンドウを使うことがあるかもしれません。 

![](NewEditorWindow.png)

上の画面のように、**Play** ボタンの隣にある下向き矢印をクリックし、 **New Editor Window** オプションを選択します。これで、ゲームにスポーンするように定義したプレイヤー数のそれぞれに対して新規ウィンドウが作成されます。 

## 詳細設定

**Play** の方法を使用して新規エディタ ウィンドウを設定した場合、エディタ ウィンドウのサイズを調整する必要があるかもしれません。 

これは、 **Advanced Settings** オプションで行うことができます。 

![](AdvancedSettings.png)

**Play** の隣の下向き矢印をクリックして **Advanced Settings** を選択して **Editor Preferences** ウィンドウを開き、**Play** オプションに進みます。 

![](WindowSize.png)

**Play in New Window** サイズ オプションでは、作成されるウィンドウのサイズとデフォルト位置を設定することができます。いくつかのプリセット ウィンドウ サイズから選択するか、ウィンドウ サイズを手動入力できます (ここの例では 640x480 を指定しました)。作成されるウィンドウの **Left** と **Top** の位置を設定するか、**Always center window to screen** （画面に対して常にウィンドウを中央に配置） のチェックボックスをクリックします。 

ウィンドウ サイズを入力後、エディタで再生すると新しい各ウィンドウは同じサイズになります。 

![](MultipleWindows.png)

各再生セッションで新しいウィンドウを使用してエディタで再生する場合、各ウィンドウの上部にプレイヤーがサーバーであるかクライアントであるかが表示されます。また、**Play** モードではウィンドウを移動させるとその位置は次回のエディタで再生のセッションのために記憶されます (従ってウィンドウを移動し続ける必要がなく、テストが簡単になります)。 

### マルチプレイヤー オプション

**Advanced Settings** 内では、以下のマルチプレイヤーのオプションを追加でセットアップできるセクションがあります。 

![](MultiplayerOptions.png)

| オプション| 説明 |
| -------- | ----------- |
| **Number of Players** | 起動時にゲームでスポーンするプレイヤー数を定義します。エディタとリッスン サーバーはプレイヤーとしてカウントされますが、専用サーバーはカウントされません。プレイヤーの残りの数はクライアントになります。 |
| **Server Game Options** | ここで URL パラメータとしてサーバーに渡される追加オプションを指定することができます。 |
| **Run Dedicated Server** | チェックを入れると別の専用サーバーが起動します。それ以外は最初のプレイヤーがその他のプレイヤーのすべてが接続できるリッスンサーバーとしての役割を果たします。 |
| **Route 1st Gamepad to 2nd Client** | ひとつのプロセスで複数プレイヤーのウィンドウを実行する場合、このオプションはゲーム パッド入力をどのようにルーティングするかを決めます。チェックを入れないと 1 つめのゲームパッドが 1 つめのウィンドウにアタッチされて、2 つめは 2 つめのウィンドウにアタッチされるというようになります。チェックを入れると 1 つめのゲームパッドが 2 つめのウィンドウにルーティングされます。これで 1 つめのウィンドウはキーボード/マウスで制御できるようになります。これは 2 名で同じコンピュータでテストを行っている場合に役立ちます。
| **Use Single Process** | UE4 の単一インスタンスでマルチプレイヤー ウィンドウをスポーンします。ロードがはるかに速くなりますが、多くの問題が生じる可能性があります。チェックを外すと、追加オプションを利用できるようになります。 |
| **Play In Editor Description** | 現在適用されているマルチプレイヤー設定に基づき再生する場合に何が起こるかの説明です。 |

**Use Single Process** にチェックを入れると、UE4 の単一インスタンスにマルチプレイヤー ウィンドウをスポーンします。このオプションのチェックを外すと割り当てられた各プレイヤーに対して UE4 の複数インスタンスが起動し、以下の追加オプションが利用できるようになります。 

![](NoSingleProcess.png)

| オプション| 説明 |
| -------- | ----------- |
| **Editor Multiplayer Mode** | Play In Editor (**Play Offline**、**Play As Listen Server**、 または **Play As Client**) で使用する NetMode です。|
| **Command Line Arguments** | スタンドアローンのゲームインスタンスに渡される追加のコマンドラインオプションを割り当てることができます。 |
| **Multiplayer Window Size (in pixels)** | スタンドアロンのゲーム インスタンスを追加でスポーンする場合に使用する幅/高さを定義します。 |

##リッスン サーバーと専用サーバー

マルチプレイヤー ゲームを起動する場合、ゲームをホストできるようにする 2 つの方法があります。1 つめは、**リッスン サーバー** (デフォルト設定) を使用する方法です。つまり、権限を持つマシンもクライアントを実行していて、他のプレイヤーをホストしながらゲームを通常どおりプレイできることを意味します。 

2 つめは、**専用サーバー** を使用する方法です。これは名前が表すように、ゲームのホスト専用であり、ローカルのプレイヤーはこのマシンではプレイしません。ローカルのプレイヤー全員が接続するのはクライアントだからです。通常、専用サーバーとして実行すると、リッスン サーバーとして実行するよりも、最適化されます。ビジュアルや入力が記録されないからです。 

エディタまたはスタンドアロン ゲームでプレイする場合、デフォルトでサーバー タイプは、リッスン サーバーに設定されています。これを専用サーバーに変更するには、**Play** ボタンの隣にある下向き矢印をクリックし、**Run Dedicated Server** の隣にあるチェックボックスをクリックします。 

![](DedicatedServer.png)






 
