INTSourceChangelist:2479096
Availability: Public
Title:블루프린트에서 카메라 사용법
Crumbs: %ROOT%, Gameplay, Gameplay\HowTo\UsingCameras
Description:블루프린트에서 카메라 사용법 안내입니다.

[TOC (start:2 end:2)]

## 개요

여기서는 게임플레이 용도로 블루프린트 안에서 **카메라** 사용법 관련 예제를 여럿 다뤄보겠습니다. 게임에 앵글 고정 카메라를 만들어 쓰든 여러 카메라를 전환해 쓰든, 게임플레이 도중에 카메라를 사용하려면 먼저 블루프린트에서 카메라를 셋업하는 방법을 알아야 할 것입니다.

[REGION:note]
시네마틱 용으로 카메라를 사용하는 법에 대한 정보는, [](Engine/Matinee/HowTo) 문서와 카메라 섹션을 참고하세요. [](Resources/Showcases/MatineeFightScene) is 역시도 샘플 컷씬으로써 어떻게 만들었는지 살펴볼 수 있는 뛰어난 예제가 됩니다.
[/REGION]

 _이 예제에는 **블루프린트 삼인칭 템플릿에 시작용 콘텐츠 포함** 을 사용했습니다._

## 고정 카메라 사용하기

여기서는 레벨에 **카메라** 액터를 배치하고 게임의 기본 카메라로 사용하는 법에 대해 알아보겠습니다. 게임플레이 도중 고정 카메라로 전환하는 방법을 사용할 수도 있습니다 (다음 섹션에서는 여러 카메라를 전환하는 법에 대해 다루겠습니다).

1.	**모드** 메뉴에서 **기본** 탭 아래, **카메라** 액터를 끌어 레벨에 놓습니다.

	![](camera_bp1.png)

	플레이어에게 게임을 보여줄 레벨 내 위치에 카메라를 배치합니다.
	
	플레이어가 어떤 화면을 보게 될 것인지 더욱 잘 파악하려면, '뷰포트를 카메라 액터에 고정' 옵션을 통해 카메라 시점을 일인칭으로 확인할 수 있습니다. 카메라를 선택한 채로 **뷰포트 옵션** 버튼에서 **뷰포트를 액터에 고정** - **카메라 액터** 를 선택합니다.

	[REGION:raw]
	![](camera_bp2.png)
	[/REGION]

	이제 WASD 키로 뷰포트 이동에 따라 카메라 위치도 같이 이동합니다. 카메라가 뷰포트에 고정되어 있는 동안에는, 뷰포트 좌상단에 자물쇠 아이콘이 나타나 있는 것을 볼 수 있습니다.

	![](camera_bp3.png)

	카메로 고정을 해제하려면, **뷰포트 옵션** 버튼을 다시 누르고 **뷰포트를 액터에 고정** - **고정해제** 옵션을 선택합니다.

1.	레벨에 **카메라 액터** 를 선택한 채, 메인 툴바에서 **블루프린트** 버튼을 클릭한 다음 **레벨 블루프린트 열기** 를 선택합니다.

	![](camera_bp4.png)

1.	**레벨 블루프린트** 안에서 그래프 창 아무데나 **우클릭** 한 다음 **CameraActor 로의 레퍼런스 추가** 를 선택합니다.

	![](camera_bp5.png)

	**카메라 액터** 로의 레퍼런스를 추가함으로써, **레벨 블루프린트** 는 이제 무언가를 하고자 할 때 어느 카메라와 이야기할지를 알게 됩니다 (여기서는 게임이 시작되면 이 카메라 액터를 기본 카메라 뷰로 설정하고자 합니다).

1.	다시 그래프에 **우클릭** 한 다음 **Event Begin Play** 노드를 추가합니다.

	![](camera_bp6.png)

	이 노드는 한 번만 실행되며, 게임이 시작되면 그 뒤에 따르는 것을 실행합니다. 원하는 동작이지요.

1.	그래프에 다시 **우클릭** 한 다음 **Set View Target** 을 검색하고 **Set View Target with Blend** 노드를 선택합니다.

	![](camera_bp7.png)

	노드가 목록에 나타나지 않으면 **맥락 의존적** 체크박스를 해제해 보세요.

1.	그래프에 다시 한 번 **우클릭** 한 다음 **Get Player Controller** 노드를 추가하세요.

	![](camera_bp8.png)

	**맥락 의존적** 체크박스를 다시 체크해야 노드를 찾기가 쉬워질 수 있습니다.

1.	아래와 같이 노드를 연결합니다.

	![](camera_bp9.png)

	여기서 **Event Begin Play** 시 (게임이 시작되면), **Set View Target with Blend** (시야)를 **Player Controller** Index 0 (기본 플레이어)에 대한 **CameraActor** (새로운 뷰 타겟)으로 설정합니다.
	
	**Set View Target with Blend** 노드의 다른 옵션을 통해 시간에 따른 블렌딩, 사용할 블렌딩 유형 지정, 블렌드 제어에 사용되는 지수 설정 등이 가능하며, 블렌드용 나가는 뷰 타겟 고정도 가능합니다 (이 모든 옵션은 기본 상태로 놔두겠습니다).

1.	**컴파일** 버튼을 눌러 마무리하고 블루프린트 창을 닫습니다.

	![](camera_bp10.png)

1.	메인 에디터 뷰에서 **플레이** 버튼을 눌러 에디터에서 플레이합니다.

이제 게임이 시작되면 플레이어의 시야가 레벨에 배치한 **카메라 액터** 에 할당되어 사용되고 있는 것을 확인할 수 있습니다. 뷰가 레터박스 형식으로 되어있는 것도 볼 수 있는데, **카메라 액터** 에 대한 **디테일** 패널 안에서 **Constrain Aspect Ratio** (종횡비 제한) 옵션을 해하는 것으로 쉽게 끌 수 있습니다.

![](camera_bp12.png)


## 여러 카메라 전환하기

이 섹션에서는 **카메라 액터** 를 여럿 배치한 다음 **트리거 박스** 를 사용하여 **레벨 블루프린트** 에게 각 카메라 전환 시점을 알려주는 방식으로 멀티 카메라 앵글을 구현하는 법 예제를 보여줍니다.

1.	**모드** 메뉴에서 **기본** 아래 전환시키고자 하는 갯수만큼 **카메라 액터** 를 끌어 놓습니다.

	![](camera_bp13.png)(w:800)
	
	여기서는 앵글이 다른 카메라를 셋 배치했습니다.

1.	또한 **모드** 메뉴에서 **기본** 아래 배치한 카메라 갯수에 맞춰 **박스 트리거** 를 끌어 놓습니다.

	![](camera_bp14.png)(w:800)

	플레이어가 카메라를 전환시켰으면 하는 트리거 위치에 **박스 트리거** 를 배치합니다. **박스 트리거** 는 **W** 키로 이동 및 **R** 키로 크기 조절이 가능합니다. 여기서는 트리거 위치를 계단 바닥에 하나, 계단 위에 하나, 플레이어가 통로를 돌아다닐 때 하나 배치했습니다.

1.	각 카메라를 선택한 상태로 **블루프린트** 버튼을 클릭한 다음 **레벨 블루프린트 열기** 를 선택합니다.

	![](camera_bp4.png)

1.	**레벨 블루프린트** 안에서 그래프에 **우클릭** 한 다음 **선택된 액터로의 레퍼런스 추가** 를 선택합니다.

	![](camera_bp15.png)

	그러면 레벨에 배치한 각 카메라 액터로의 레퍼런스가 추가됩니다.

1.	**레벨 블루프린트** 를 최소화시킨 다음, 레벨에서 **박스 트리거** 각각을 선택한 다음 **레벨 블루프린트** 로 돌아옵니다.

1.	그래프에 **우클릭** 한 다음 **선택된 액터에 대한 이벤트 추가** 아래 **콜리전** 에서 **Add OnActorBeginOverlap** 를 선택합니다. 

	![](camera_bp16.png)

	그러면 플레이어가 각 **박스 트리거** 에 들어설 때 발동되는 **이벤트** 가 추가됩니다.

1.	그래프에 **우클릭** 한 다음 **Get Player Controller** 노드를 추가합니다.

	![](camera_bp17.png)

1.	그래프에 **우클릭** 한 다음 **Set View Target with Blend** 노드를 추가합니다 (안보이면 **맥락 의존적** 체크를 해제합니다). 

1.	**Set View Target with Blend** 노드를 두 번 복사한 다음 아래와 같이 노드를 연결합니다.

	![](camera_bp18.png)

1.	**컴파일** 을 클릭한 다음 블루프린트를 닫고 **플레이** 를 클릭하여 에디터에서 플레이합니다.

이제 배치한 박스 트리거 각각에 들어서면 지정한 카메라 액터로 게임 뷰가 업데이트되는 것을 볼 수 있을 것입니다. 멀티 카메라 기반 게임 작업 토대가 되는 간단한 예제로, 플레이어가 카메라 뷰 앵글 밖에 있는 상황을 고려하여 카메라에 상대적으로 플레이어 입력을 조정해 볼 수도 있겠습니다.

## 카메라 컴포넌트 사용하기

여기서는 **블루프린트** 에 **카메라 컴포넌트** 를 추가하여, 레벨의 플레이가능 또는 불가능 액터에 대한 삼인칭 시점을 만드는 법을 보여드리겠습니다.

1.	**콘텐츠 브라우저** 에서 **추가** 버튼을 클릭한 다음 **블루프린트** 옵션을 클릭합니다.

	[REGION:raw]
	![](Engine\Blueprints\UserGuide\Types\ClassBlueprint\Creation\CreateBP_mainFlow.png)
	[/REGION]
	
1.	**클래스** 창이 나타나면 **캐릭터** 옵션을 클릭한 다음, 블루프린트에 이름을 짓고 열어줍니다.

1.	**컴포넌트** 패널에서 **컴포넌트 추가** 버튼을 클릭한 다음 **카메라** 를 선택합니다.

	[REGION:raw]
	![](component3.png)
	[/REGION]

	그러면 블루프린트 액터에 **카메라 컴포넌트** 가 추가됩니다.

1.	카메라가 추가되면 캐릭터 무브먼트 캡슐 안에 나타나는데, 원하는 바가 아닙니다.

	![](component4.png)

	[REGION:note]
	**뷰포트** 는 블루프린트 에디터의 그래프 영역에 도킹됩니다. 탭을 클릭하여 전환하면 컴포넌트가 어디 위치해 있는지 확인할 수 있습니다.
	[/REGION]

1.	**이동** 위젯을 사용하여 카메라를 캡슐 뒤 바람직한 삼인칭 시점 위치로 이동합니다.

	![](component5.png)

	**회전** 모드로 들어가 (**E** 키) 카메라를 회전시켜 각도를 원하는 대로 조정할 수도 있습니다.

1.	**컴포넌트 추가** 버튼을 다시 한 번 누른 다음, **스태틱 메시** 를 선택합니다.

1.	**스태틱 메시** 에 대한 **디테일** 패널에서, **스태틱 메시** 아래 드롭다운 메뉴를 클릭한 다음 사용할 메시를 선택하세요.

	![](component11.png)
	
	이 예제에서는 캐릭터로 Capsule 을 선택했습니다.

	![](component6.png)

1.	블루프린트를 최소화시키고, **콘텐츠 브라우저** 에서 **Game/Blueprints** 폴더 아래 **MyCharacter** 블루프린트를 엽니다.

1.	Mouse, Movement, Jump Input 섹션을 복사합니다 (방금 생성한 캐릭터 블루프린트에 붙여넣을 것입니다).

	![](component7.png)

1.	새로 만든 캐릭터 블루프린트로 돌아와, **MyCharacter** 블루프린트에서 복사한 콘텐츠를 붙여넣습니다.

1.	**컴파일** 버튼을 클릭한 다음 블루프린트를 닫습니다.

1.	**Game/Blueprints** 폴더에서 **MyGame** 블루프린트를 연 다음 새로 만든 Character 를 **Default Pawn Class** 에 할당합니다.

	![](component8.png)

1.	**컴파일** 버튼을 클릭한 다음 블루프린트를 닫고, 메인 에디터 창에서 **플레이** 버튼을 누릅니다.

에디터에서 플레이해 보면, 지정한 스태틱 메시를 사용한 캐릭터가 레벨을 돌아다니는 와중에, 할당한 카메라 컴포넌트가 그 캐릭터를 따라다니는 것을 볼 수 있을 것입니다.

**카메라 액터** 에 존재하는 모든 카메라 옵션은 위에서 만든 블루프린트 안의 **카메라** 컴포넌트를 통해 접근 및 설정 (예를 들어 플레이어가 대미지를 받거나 파워 업을 한 경우 색을 입히거나 변환하는 것이) 가능합니다. 카메라 컴포넌트의 위치 조정을 통해 플레이어의 일인칭 / 삼인칭 심지어 "어깨위" 카메라 유형 전환까지도 가능합니다.

![](component9.png)

위 그림에서 **Arrow** 컴포넌트를 둘 배치하여 **카메라 컴포넌트** 이동 대상 마커로 활용했습니다. 그리고서 블루프린트 **그래프** 탭에 아래와 비슷한 스크립트를 추가하여 두 위치의 카메라 토글이 가능합니다.

 ![](component10.png)

 이것은 **오른쪽 마우스 버튼** 을 누르면 (우리 **카메라 컴포넌트** 인) **Camera1** 위치를 (어깨위 시점인) **Arrow2** 위치로 설정합니다. **오른쪽 마우스 버튼** 을 놓으면, 카메라를 (**Arrow1** 로 나타나 있는) 기본 위치로 되돌립니다.

 
## 스프링 암 컴포넌트 사용하기

**카메라 컴포넌트** 를 사용하여 삼인칭 캐릭터 시점을 만들 때, 보통은 **스프링 암 컴포넌트** 를 포함시켜 카메라의 부모로 설정합니다. 그러면 **스프링 암 컴포넌트** 는 부모와 그 자손에 일정한 거리를 유지하다가, 충돌이 생기면 자손을 집어넣고, 콜리전이 없으면 다시 되돌아가게 만듭니다.

카메라가 단단한 오브젝트를 관통해 버리는 경우, 예를 들어 아래 그림에서 벽을 등지고 서 있을 때 카메라가 캐릭터 옆의 벽을 관통하여 레벨의 플레이 공간 밖이 보이는 경우를 방지 또는 최소화시키기 위한 것입니다. **스프링 암** 을 사용하면, 카메라를 집어넣어 벽을 뚫고 나가는 것을 방지하고, 벽에서 멀어지면 정상 위치로 스프링처럼 되돌아갑니다.

![](springArm1.png)

카메라 셋업에 **스프링 암 컴포넌트** 를 추가하는 법은 아래와 같습니다.

1.	**카메라 컴포넌트 사용하기** 섹션에서 이어서, **캐릭터 블루프린트** 를 엽니다.

1.	**컴포넌트** 탭에서 **컴포넌트 추가** 버튼을 클릭한 다음 **스프링 암 컴포넌트** 를 선택합니다.

	[REGION:raw]
	![](springArm2.png)
	[/REGION]

1.	**컴포넌트** 창 안에서 **카메라 컴포넌트** 를 끌어 **스프링 암 컴포넌트** 위에 놓아 붙입니다.

	[REGION:raw]
	![](springArm3.png)
	[/REGION]

1.	**스프링 암** 에 사용할 수 있는 여러가지 세팅에 대한 개요는 아래와 같습니다.

	![](springArm4.png)

	| 섹션 | 설명 |
	| ------- | ------------ |
	| **Sockets** | 소켓 - 스프링 암을 스켈레탈 메시상의 본 또는 소켓에 부모화시킬 수 있습니다. |
	| **Events** | 이벤트 - 스프링 암에 대한 이벤트 추가 또는 컴포넌트 태그 적용이 가능합니다. |
	| **Camera** | 카메라 - 콜리전이 없을 때 스프링 암의 길이 및 오프셋 설정도 가능합니다. |
	| **Camera Collision** | 카메라 콜리전 - 콜리전 검사를 할지 말지, 콜리전 검사를 위한 범위를 얼마나 크게 할지를 정의합니다. |
	| **Camera Settings** | 카메라 세팅 - 부모에서 핏치, 요, 롤 상속을 할지, 폰 콘트롤 로테이션 사용을 할지 입니다. |
	| **Lag** | 랙 - 카메라가 대상 위치 뒤를 시간차를 두고 따르도록 할지, 그리고 그 랙 관련 세팅입니다. |
	
1.	세팅에 만족하면 (모든 것은 기본 상태로 놔뒀습니다), **컴파일** 클릭 후 블루프린트를 닫습니다.

1.	메인 툴 바에서 **플레이** 버튼을 클릭하여 에디터에서 플레이합니다.

캐릭터를 벽 근처로 옮기거나, 캐릭터와 카메라 사이에 오브젝트가 오도록 위치를 조정한 다음, 카메라가 어떻게 자동 조정 또는 이동하여 중간에 오브젝트와 교차하지 않도록 되는지 보세요.

[REGION:note]
언리얼 엔진 4 의 카메라 관련 상세 정보는, [](Gameplay\Framework\Camera) 문서의 **프레임워크** 섹션을 참고하세요. 
[/REGION]




